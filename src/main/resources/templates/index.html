<!DOCTYPE html>
<html lang="ja" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>„Åæ„ÇÇ„É≠„Ç∞ | Home</title>
    <link rel="stylesheet" href="/css/styles.css" />
</head>

<body>
    <div class="app-shell">
        <!-- =========================
             „Éò„ÉÉ„ÉÄ„Éº / „Éè„É≥„Éê„Éº„Ç¨„Éº„É°„Éã„É•„Éº
             ========================= -->
        <header class="topbar">
            <button id="menu-toggle" class="menu-btn">‚ò∞</button>
            <nav id="side-menu" class="side-menu">
                <ul>
                    <li><a href="#" class="nav-link">„É≠„Ç∞„Ç§„É≥</a></li>
                    <li><a href="/todos/new" class="nav-link">Todo‰ΩúÊàê</a></li>
                    <li><a href="/diary/new" class="nav-link">Êó•Ë®òÁôªÈå≤</a></li>
                    <li><a href="#" class="nav-link">„É¨„Éù„Éº„ÉàÂèÇÁÖß</a></li>
                    <li><a href="#" class="nav-link">Ë®≠ÂÆö</a></li>
                </ul>
            </nav>
            <div class="title">„Åæ„ÇÇ„É≠„Ç∞ üê•</div>
        </header>

        <main class="main-area">
            <!-- =========================
                 „Çø„Éñ„Éê„Éº
                 ========================= -->
            <nav class="tabbar">
                <a class="tab active" href="/todos" data-tab="todo">„Çø„Çπ„ÇØ</a>
                <a class="tab" href="#" data-tab="diary">Êó•Ë®ò</a>
                <a class="tab" href="/calendar" data-tab="calendar">„Ç´„É¨„É≥„ÉÄ„Éº</a>
                <a class="tab" href="#" data-tab="mypage">„Éû„Ç§„Éö„Éº„Ç∏</a>
            </nav>

            <!-- =========================
                 Ê§úÁ¥¢„Éï„Ç©„Éº„É† / Êñ∞Ë¶è‰ΩúÊàê
                 - name="keyword" „ÅØ Controller „ÅÆ @RequestParam("keyword") „Å®‰∏ÄËá¥„Åï„Åõ„Çã„Åì„Å®
                 ========================= -->
            <section class="controls">
                <form th:action="@{/todos/search}" method="get" style="display:flex; gap:5px;">
                    <!-- keyword „ÇíÂÜçË°®Á§∫„Åô„Çã„Åü„ÇÅ model „Å´ "keyword" „ÅåÂÖ•„Å£„Å¶„ÅÑ„Çã„Å®‰æøÂà© -->
                    <input id="searchInput" type="search" name="keyword" placeholder="„Ç≠„Éº„ÉØ„Éº„Éâ„ÅßÊ§úÁ¥¢"
                           th:value="${keyword}">
                    <button type="submit" class="btn">Ê§úÁ¥¢</button>
                </form>
                <a href="/todos/new"><button type="button" class="btn">Ôºã Êñ∞Ë¶è‰ΩúÊàê</button></a>
            </section>

            <!-- =========================
                 ‰∏¶„Å≥Êõø„Åà / Êó•‰ªòÊåáÂÆöÔºàControllerÂÅ¥„ÅØ sortBy „Å® date „ÇíÂèó„ÅëÂèñ„Çå„Çã„Çà„ÅÜ„Å´Ôºâ
                 ========================= -->
            <section class="sort-options">
                <span>‰∏¶„Å≥Êõø„Åà:</span>
                <!-- sortBy „Éë„É©„É°„Éº„Çø: account / category / dueDate / title „Å™„Å© -->
                <a th:href="@{/todos/sort(sortBy='account')}" th:classappend="${sortBy == 'account'} ? ' active'">ÊãÖÂΩìËÄÖÈ†Ü</a> |
                <a th:href="@{/todos/sort(sortBy='category')}" th:classappend="${sortBy == 'category'} ? ' active'">„Ç´„ÉÜ„Ç¥„É™È†Ü</a> |
                <a th:href="@{/todos/sort(sortBy='dueDate')}" th:classappend="${sortBy == 'dueDate'} ? ' active'">Êó•‰ªòÈ†Ü</a>
                <!-- Êó•‰ªò„ÅßÁµû„ÇäËæº„Åø„Åü„ÅÑÂ†¥Âêà„ÅØ date „ÇíÊ∏°„ÅôÔºàControllerÂÅ¥„ÅßÂèó„ÅëÂèñ„Çä„ÄÅÁµû„ÇäËæº„ÇÄÂÆüË£Ö„Çí„Åô„ÇãÔºâ -->
                <form th:action="@{/todos/sort}" method="get" style="display:inline-block; margin-left:10px;">
                    <input type="date" name="date" th:value="${date}">
                    <button type="submit">Êó•‰ªòË°®Á§∫</button>
                </form>
            </section>

            <!-- =========================
                 „Çø„Éñ„Ç≥„É≥„ÉÜ„É≥„ÉÑÔºöÊú™ÂÆå‰∫Ü/ÂÆå‰∫Ü„Çø„Çπ„ÇØË°®Á§∫
                 ‚Äª View ÂÅ¥„ÅØ Todo „Ç®„É≥„ÉÜ„Ç£„ÉÜ„Ç£Ôºà„Éó„É≠„Éë„ÉÜ„Ç£Ôºöid, title, memo, account, category, dueDate, dueTime, completedÔºâ„ÇíÂâçÊèê
                 Controller „ÅØ model „Å´ todoList „Å® completedList „Çí„Çª„ÉÉ„Éà„Åó„Å¶Ê∏°„Åô„Åì„Å®
                 ========================= -->
            <section id="tab-content">
                <div id="todo" class="tab-pane active">

                    <!-- „Éò„ÉÉ„ÉÄ„ÉºÔºöÊú™ÂÆå‰∫Ü‰ª∂Êï∞ -->
                    <section class="todo-header">
                        <h1>‰ªäÊó•‰ª•Èôç„ÅÆ„ÇÑ„Çã„Åì„Å®</h1>
                        <!-- #lists.size „ÅØ null ÂÆâÂÖ®„Åß„ÅØ„Å™„ÅÑ„Åü„ÇÅ„ÄÅController ÂÅ¥„ÅßÁ©∫„É™„Çπ„Éà‰øùË®º„ÅåÂ•Ω„Åæ„Åó„ÅÑ -->
                        <div class="remaining">
                            ÊÆã„ÇäÔºö<span id="pending-count" th:text="${todoList != null ? todoList.size() : 0}">0</span> ‰ª∂
                        </div>
                    </section>

                    <!-- Êú™ÂÆå‰∫Ü„É™„Çπ„ÉàÔºàÁ∏¶‰∏¶„Å≥Ôºâ -->
                    <section class="todo-list vertical" id="pending-list">
                        <!--
                          th:each „Åß model „ÅÆ "todoList"ÔºàList<Todo>Ôºâ„ÇíÁπ∞„ÇäËøî„Åô„ÄÇ
                          „Åì„Åì„Åß„ÅØÂ§âÊï∞Âêç„Çí "todo" „Å´„Åó„Å¶„ÅÑ„Åæ„ÅôÔºà„Çè„Åã„Çä„ÇÑ„Åô„Åï„ÅÆ„Åü„ÇÅÔºâ„ÄÇ
                        -->
                        <li th:each="todo : ${todoList}"
                            class="todo-card"
                            th:attr="data-id=${todo.id}">

                            <!-- „ÉÅ„Çß„ÉÉ„ÇØ„Éú„ÉÉ„ÇØ„ÇπÔºöÊäº„Åô„Å® /todos/{id}/toggle „Å´ fetch „Åô„ÇãÊÉ≥ÂÆöÔºàapp.jsÔºâ -->
                            <div class="todo-main">
                                <label class="chk">
                                    <input type="checkbox"
                                           class="todo-checkbox"
                                           th:attr="data-id=${todo.id}"
                                           th:checked="${todo.completed} ? 'checked' : null"
                                           />
                                    <span class="fakebox"></span>
                                </label>

                                <!-- „Çø„Ç§„Éà„É´„ÉªÊãÖÂΩìËÄÖ„Éª„É°„É¢„Éª„Ç´„ÉÜ„Ç¥„É™„ÉªÊúüÈôê -->
                                <div class="todo-body">
                                    <div class="todo-title">
                                        <span th:text="${todo.title}">„Çø„Ç§„Éà„É´</span>
                                        <!-- ÊãÖÂΩìËÄÖ„Éê„ÉÉ„Ç∏Ôºà„Å±„Å±/„Åæ„Åæ „Åß„ÇØ„É©„Çπ‰ªò‰∏éÔºâ -->
                                        <span class="assignee"
                                              th:text="${todo.account}"
                                              th:classappend="${todo.account == '„Å±„Å±'} ? ' papa' : ' mama'">
                                        </span>
                                    </div>

                                    <!-- „É°„É¢Ôºànull „ÅÆÂ†¥Âêà„ÅØÁ©∫Ë°®Á§∫Ôºâ -->
                                    <div class="todo-meta" th:text="${todo.memo}">„É°„É¢</div>

                                    <!-- „Ç´„ÉÜ„Ç¥„É™„ÅØÂ≠òÂú®„Åô„ÇãÂ†¥Âêà„ÅÆ„ÅøË°®Á§∫ -->
                                    <div class="todo-meta" th:if="${todo.category != null}">
                                        „Ç´„ÉÜ„Ç¥„É™: <span th:text="${todo.category.name}">„Ç´„ÉÜ„Ç¥„É™Âêç</span>
                                    </div>

                                    <!-- ÊúüÈôêÔºàdate / time „Åå„ÅÇ„ÇãÂ†¥Âêà„ÅÆ„ÅøÔºâ -->
                                    <div class="todo-meta" th:if="${todo.dueDate != null}">
                                        ÊúüÈôê:
                                        <span th:text="${todo.dueDate}">yyyy-MM-dd</span>
                                        <span th:if="${todo.dueTime != null}" th:text="${todo.dueTime}">HH:mm</span>
                                    </div>
                                </div>
                            </div>

                            <!-- Á∑®ÈõÜ„É™„É≥„ÇØÔºàÁ∑®ÈõÜÁîªÈù¢„ÅØ /todos/{id}/edit „Çí Controller „ÅßÁî®ÊÑèÔºâ -->
                            <div class="todo-actions">
                                <a th:href="@{/todos/{id}/edit(id=${todo.id})}" class="edit-link">Á∑®ÈõÜ</a>
                            </div>
                        </li>
                    </section>

                    <!-- ÂÆå‰∫Ü„Çø„Çπ„ÇØ -->
                    <section class="completed-tasks">
                        <h2>
                            ÂÆå‰∫Ü„Çø„Çπ„ÇØ
                            <button id="toggle-completed-btn" type="button">ÈùûË°®Á§∫„Å´„Åô„Çã</button>
                        </h2>

                        <section class="todo-list vertical" id="completed-list">
                            <!-- ÂÆå‰∫Ü„Çø„Çπ„ÇØ„ÅØ completedList „ÇíÁπ∞„ÇäËøî„Åô -->
                            <li th:each="todo : ${completedList}"
                                class="todo-card done"
                                th:attr="data-id=${todo.id}">
                                <div class="todo-main">
                                    <label class="chk">
                                        <!-- ÂÆå‰∫ÜÊ∏à„Åø„ÅØ„ÉÅ„Çß„ÉÉ„ÇØÊ∏à„Åø„ÅßË°®Á§∫ -->
                                        <input type="checkbox" class="todo-checkbox" th:attr="data-id=${todo.id}" checked />
                                        <span class="fakebox"></span>
                                    </label>
                                    <div class="todo-body">
                                        <div class="todo-title">
                                            <span th:text="${todo.title}">„Çø„Ç§„Éà„É´</span>
                                            <span class="assignee" th:text="${todo.account}"
                                                  th:classappend="${todo.account == '„Å±„Å±'} ? ' papa' : ' mama'"></span>
                                        </div>
                                        <div class="todo-meta" th:text="${todo.memo}">„É°„É¢</div>
                                        <div class="todo-meta" th:if="${todo.category != null}">
                                            „Ç´„ÉÜ„Ç¥„É™: <span th:text="${todo.category.name}">„Ç´„ÉÜ„Ç¥„É™Âêç</span>
                                        </div>
                                        <div class="todo-meta" th:if="${todo.dueDate != null}">
                                            ÊúüÈôê:
                                            <span th:text="${todo.dueDate}">yyyy-MM-dd</span>
                                            <span th:if="${todo.dueTime != null}" th:text="${todo.dueTime}">HH:mm</span>
                                        </div>
                                    </div>
                                </div>
                            </li>
                        </section>
                    </section>
                </div>
            </section>
        </main>
    </div>

    <!-- JSÔºàapp.js „ÅØ„ÉÅ„Çß„ÉÉ„ÇØ„Éú„ÉÉ„ÇØ„Çπ toggle Á≠â„ÇíÊâ±„ÅÜÔºâ -->
    <script src="/js/app.js"></script>
    <script src="/js/todo-new.js"></script>
</body>
</html>
