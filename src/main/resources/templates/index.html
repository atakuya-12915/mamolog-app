<!DOCTYPE html>
<html lang="ja" xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width,initial-scale=1" />
	<title>まもログ | Home</title>
	<link rel="stylesheet" href="css/styles.css" />
</head>

<body>
	<div class="app-shell">
		<!-- ヘッダー -->
		<header class="topbar">
			<button id="menu-toggle" class="menu-btn">☰</button>
			<nav id="side-menu" class="side-menu">
				<ul>
					<li><a href="#" class="nav-link">ログイン</a></li>
					<li><a href="/todos/new" class="nav-link">Todo作成</a></li>
					<li><a href="/diary/new" class="nav-link">日記登録</a></li>
					<li><a href="#" class="nav-link">レポート参照</a></li>
					<li><a href="#" class="nav-link">設定</a></li>
				</ul>
			</nav>
			<div class="title">まもログ 🐥</div>
		</header>

		<!-- メイン -->
		<main class="main-area">
			<nav class="tabbar">
				<a class="tab active" href="/todos" data-tab="todo">タスク</a>
				<a class="tab" href="#" data-tab="diary">日記</a>
				<a class="tab" href="#" data-tab="calendar">カレンダー</a>
				<a class="tab" href="#" data-tab="mypage">マイページ</a>
			</nav>

			<section id="tab-content">
				<!-- 未完了タスク -->
				<div id="todo" class="tab-pane active">
					<section class="todo-header">
						<h1>今日のやること</h1>
						<div class="remaining">残り：<span th:text="${todoList != null ? todoList.size() : 0}">0</span> 件
						</div>
					</section>

					<section class="controls">
						<input id="searchInput" type="search" placeholder="検索（タイトル／タグ）">
						<a href="/todos/new"><button class="btn">＋ 新規作成</button></a>
					</section>

					<!-- 未完了タスクリスト -->
					<section class="task-list" id="taskList">
						<ul>
							<li th:each="todo : ${todoList}" class="task-card">
								<div class="task-main">
									<!-- 完了チェックボックス -->
									<label class="chk">
										<input type="checkbox" th:checked="${todo.completed}"
											th:onclick="|location.href='/todos/${todo.id}/toggle'|" />
										<span class="fakebox"></span>
									</label>
									<div class="task-body">
										<div class="task-title" th:text="${todo.title}">タイトル</div>
										<div class="task-meta"
											th:text="${todo.category != null ? todo.category.name : '未設定'}">カテゴリ</div>
									</div>
								</div>
								<a th:href="@{/todos/{id}/edit(id=${todo.id})}">編集</a>
							</li>
						</ul>
					</section>

					<!-- 完了タスク折りたたみ -->
					<section class="completed-tasks">
						<h2>完了済みタスク</h2>
						<ul>
							<li th:each="todo : ${completedList}" class="task-card">
								<div class="task-main">
									<label class="chk">
										<input type="checkbox" th:checked="${todo.completed}"
											th:onclick="|location.href='/todos/${todo.id}/toggle'|" />
										<span class="fakebox"></span>
									</label>
									<div class="task-body">
										<div class="task-title" th:text="${todo.title}">タイトル</div>
										<div class="task-meta"
											th:text="${todo.category != null ? todo.category.name : '未設定'}">カテゴリ</div>
									</div>
								</div>
								<a th:href="@{/todos/{id}/edit(id=${todo.id})}">編集</a>
							</li>
						</ul>
					</section>
				</div>
			</section>
		</main>
	</div>

	<script src="js/todo-new.js"></script>
</body>

</html>